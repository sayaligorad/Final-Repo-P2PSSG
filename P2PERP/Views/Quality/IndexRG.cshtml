@{
    ViewBag.Title = "IndexRG";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<html>
<head>
    <style>
        #mainCard {
            box-shadow: none;

        }

    </style>
</head>
<body class="bg-light">
    <div id="toastContainer" class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 1100;"></div>

    <div class="container mt-5">


        <!-- 🔹 Entire Page wrapped in one card -->
        <div class="card shadow-lg rounded-3 border-0">

            <!-- Card Body -->
            <div>
                <!-- Header (Centered) -->
                <h3 class="w-100 mb-0 fw-bolder text-center text-primary">
                    Check Quality
                </h3>

                <!-- Task Section -->
                <div id="taskSection"  style="display:none;">
                    <!-- Nav Pills -->
                    <ul class="nav nav-pills ms-3" id="taskTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active fw-medium"
                                    id="new-task-tab"
                                    data-bs-toggle="pill"
                                    data-bs-target="#newTaskTab"
                                    type="button"
                                    role="tab"
                                    aria-controls="newTaskTab"
                                    aria-selected="true"
                                    onclick="openTasks()">
                                New Task
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link fw-medium"
                                    id="completed-task-tab"
                                    data-bs-toggle="pill"
                                    data-bs-target="#completedTaskTab"
                                    type="button"
                                    role="tab"
                                    aria-controls="completedTaskTab"
                                    aria-selected="false"
                                    onclick="openTaskCom()">
                                Completed Task
                            </button>
                        </li>
                    </ul>

                    <!-- Tab Content -->
                    <div class="tab-content mt-3" id="taskTabsContent">
                        <div class="tab-pane fade show active" id="newTaskTab" role="tabpanel">
                            <div id="newTaskContent" class="p-2">Loading...</div>
                        </div>
                        <div class="tab-pane fade" id="completedTaskTab" role="tabpanel">
                            <div id="completedTaskContent" class="p-3">Loading...</div>
                        </div>
                    </div>
                </div>


            </div> <!-- End Card Body -->
        </div> <!-- End Card -->

    </div> <!-- End Container -->

    <style>

        .white-header {
            background: white !important;
        }

            .white-header h3 {
                color: var(--bs-primary) !important;
            }

        button.dt-button.processing,
        div.dt-button.processing {
            pointer-events: auto !important;
            opacity: 1 !important;
            background: none !important;
        }

            button.dt-button.processing:after {
                content: none !important;
            }
    </style>





    <script>
        let MainGRNCode;

        $(document).ready(function () {
            $("#taskSection").show();
            openTasks();
        });

        //  Initialize DataTable
        function initGrnTable() {
            //  Task Section
            function openTask(grnCode, status) {
                debugger
                $("#grnGridSection").hide();
                $("#taskSection").show();
                $('#dtp').hide();

                if (status.toLowerCase().trim() === "completed") {
                    $('#completed-task-tab').tab('show'); // Activate Completed tab
                } else {
                    $('#new-task-tab').tab('show'); // Default to New Task tab
                }

                $("#newTaskContent").load(`/Quality/NewTaskListRG?id=${grnCode}`);
                $("#completedTaskContent").load(`/Quality/CompletedTaskListRG?id=${grnCode}`);
            }
        }


        function openTasks() {
            debugger;
            $("#newTaskContent").load(`/Quality/NewTaskListRG?id=${MainGRNCode}`);
            $('#new-task-tab').tab('show');
        }

        function openTaskCom() {
            debugger;
            $("#completedTaskContent").load(`/Quality/CompletedTaskListRG?id=${MainGRNCode}`);
            $('#completed-task-tab').tab('show');
        }
    </script>


</body>
</html>

